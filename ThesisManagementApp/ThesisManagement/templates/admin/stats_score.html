{% extends 'admin/base_site.html' %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
{% block content %}
<h1>THỐNG KÊ ĐIỂM
    {% if current_year == 'all' %}
    TẤT CẢ NĂM
    {% else %}
    NĂM {{ current_year }}
    {% endif %}
</h1>
<div>
    <div>
        <form method="get">
            <!--    <label for="param">Parameter:</label>-->
            <!--    <input type="text" id="param" name="param" value="{{ year }}">-->
            <label for="year">Chọn năm:</label>
            <select id="year" name="year">
                <option value="all">Tất Cả Năm</option>
                {% for i in year_has_thesis %}
                <option value="{{ i }}">{{ i }}</option>
                {% endfor %}
            </select>
            <label for="major">Chọn nghành:</label>
            <select id="major" name="major">
                <option value="all">Tất Cả Nghành</option>
                {% for m in major %}
                <option value="{{ m.id }}">{{ m.name }}</option>
                {% endfor %}
            </select>
            <button type="submit">Lọc</button>
        </form>
    </div>
    <div>
        <div style="width: 500px;">
            <canvas id="myChart"></canvas>
            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        </div>
        <br/>
        <!--        <script type="module" src="dimensions.js"></script>-->
        <script>
    window.onload = () => {

        let data = []
        let labels = []
        {% for s in score %}
            data.push({{ s.count }})
            labels.push({{ s.score }})
        {% endfor %}

        const ctx = document.getElementById('myChart');
      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: labels,
          datasets: [{
            label: 'Số lượng',
            data: data,
            borderWidth: 1,
  <!--          backgroundColor: [-->
  <!--            'rgb(255, 99, 132)',-->
  <!--            'rgb(54, 162, 235)',-->
  <!--            'rgb(255, 205, 86)'-->
  <!--          ]-->
          }]
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
              title: {
                display: false  // Ẩn label của trục y
              }
            }
          }
        }
      });
    }
</script>

    </div>
</div>

{% endblock %}